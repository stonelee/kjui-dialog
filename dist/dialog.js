define("kjui/dialog/1.0.0/dialog",["$","arale/overlay/0.9.12/mask","arale/overlay/0.9.12/overlay","arale/position/1.0.0/position","arale/iframe-shim/1.0.0/iframe-shim","arale/widget/1.0.2/widget","arale/base/1.0.1/base","arale/class/1.0.0/class","arale/events/1.0.0/events","arale/dialog/1.0.1/dialog","arale/overlay/1.0.1/overlay","arale/iframe-shim/1.0.1/iframe-shim","arale/widget/1.0.3/widget","arale/overlay/1.0.1/mask","arale/widget/1.0.3/templatable","gallery/handlebars/1.0.0/handlebars"],function(e,t,n){var r=e("$"),i=e("arale/overlay/0.9.12/mask"),s=e("arale/dialog/1.0.1/dialog"),o=s.extend({parseElement:function(){s.superclass.parseElement.call(this),this.contentElement=this.$("[data-role=content]"),this.$("[data-role=close]").hide()},events:{"click [data-role=confirm]":function(e){e.preventDefault(),this.trigger("confirm")},"click [data-role=cancel]":function(e){e.preventDefault(),this.hide()}},_onChangeMessage:function(e){this.$("[data-role=message]").html(e)},_onChangeTitle:function(e){this.$("[data-role=title]").html(e)},_onChangeConfirmTpl:function(e){this.$("[data-role=confirm]").html(e)},_onChangeCancelTpl:function(e){this.$("[data-role=cancel]").html(e)}}),u=".dialog-events-";i.set("opacity",.5).set("backgroundColor","rgb(204, 204, 204)");var a=o.extend({attrs:{template:'<div class="dialog"> <i class="icon-tool-close" title="关闭" data-role="close"></i>{{#if title}} <div class="form-hd" data-role="head"> <span data-role="title">{{{title}}}</span> </div> {{/if}}<div data-role="content" class="form-bd"> {{#if icon}} <i class="icon-{{icon}}"></i> {{/if}}<span data-role="message">{{{message}}}</span> </div>{{#if hasFoot}} <div class="form-ft">{{#if confirmTpl}} <button class="btn" data-role="confirm">{{{confirmTpl}}}</button> {{/if}}{{#if cancelTpl}} <button class="btn" data-role="cancel">{{{cancelTpl}}}</button> {{/if}}</div> {{/if}}</div>',content:"",closeTpl:!0,width:300},model:{title:"标题",icon:!1,message:"内容",confirmTpl:"确定",cancelTpl:"取消"},parseElement:function(){this.model.hasFoot=this.model.confirmTpl||this.model.cancelTpl,a.superclass.parseElement.call(this)},events:{"mousedown [data-role=head]":"_dragStart","mouseup [data-role=head]":"_dragEnd"},_dragStart:function(e){e.which==1&&(console.log("start"),e.preventDefault(),this._onDrag=!0,this._mouseX=e.pageX,this._mouseY=e.pageY)},_drag:function(e){if(this._onDrag){var t=e.pageX-this._mouseX,n=e.pageY-this._mouseY,r=this.element.offset(),i=r.left+t,s=r.top+n;this.element.offset({left:i,top:s}),this._mouseX=e.pageX,this._mouseY=e.pageY}},_dragEnd:function(e){this._onDrag=!1},setup:function(){a.superclass.setup.call(this),this.$("[data-role=head]").css("cursor","move");var e=this;r(document).on("mousemove"+u+this.cid,function(){e._drag.apply(e,arguments)})},destroy:function(){return r(document).off("mousemove"+u+this.cid),a.superclass.destroy.call(this)}});a.alert=function(e,t,n){var i={closeTpl:"",model:{title:!1,icon:"info",message:e,cancelTpl:!1},onConfirm:function(){t&&t(),this.hide()}};(new a(r.extend(!0,i,n))).show().after("hide",function(){this.destroy()})},a.confirm=function(e,t,n,i){var s={closeTpl:"",model:{title:t,icon:"question",message:e},onConfirm:function(){n&&n(),this.hide()}};(new a(r.extend(!0,s,i))).show().after("hide",function(){this.destroy()})},a.show=function(e,t,n){var i={model:{title:!1,message:e,confirmTpl:!1,cancelTpl:!1},onConfirm:function(){t&&t(),this.hide()}};(new a(r.extend(!0,i,n))).show().before("hide",function(){t&&t()}).after("hide",function(){this.destroy()})},n.exports=a});