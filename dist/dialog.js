define("kjui/dialog/1.1.0/dialog",["$","arale/widget/1.0.3/widget","arale/base/1.0.1/base","arale/class/1.0.0/class","arale/events/1.0.0/events","arale/overlay/1.0.1/mask","arale/overlay/1.0.1/overlay","arale/position/1.0.0/position","arale/iframe-shim/1.0.1/iframe-shim","arale/dialog/1.0.2/dialog","arale/widget/1.0.3/templatable","gallery/handlebars/1.0.0/handlebars","./dialog.tpl"],function(e,t,n){function a(e){return"[object String]"===toString.call(e)}var i=e("$"),o=e("arale/widget/1.0.3/widget"),l=e("arale/overlay/1.0.1/mask"),s=e("arale/dialog/1.0.2/dialog"),r=s.extend({parseElement:function(){s.superclass.parseElement.call(this),this.contentElement=this.$("[data-role=content]"),this.$("[data-role=close]").hide()},events:{"click [data-role=confirm]":function(e){e.preventDefault(),this.trigger("confirm")},"click [data-role=cancel]":function(e){e.preventDefault(),this.hide()}},_onChangeMessage:function(e){this.$("[data-role=message]").html(e)},_onChangeTitle:function(e){this.$("[data-role=title]").html(e)},_onChangeConfirmTpl:function(e){this.$("[data-role=confirm]").html(e)},_onChangeCancelTpl:function(e){this.$("[data-role=cancel]").html(e)}}),c=".dialog-events-";l.set("opacity",.5).set("backgroundColor","rgb(204, 204, 204)");var d=r.extend({attrs:{template:e("./dialog.tpl"),content:"",closeTpl:!0,width:300,zIndex:100},model:{title:"标题",icon:!1,message:"内容",confirmTpl:"确定",cancelTpl:"取消"},parseElement:function(){this.model.hasFoot=this.model.confirmTpl||this.model.cancelTpl,d.superclass.parseElement.call(this)},events:{"mousedown [data-role=head]":"_dragStart","mouseup [data-role=head]":"_dragEnd"},_dragStart:function(e){1==e.which&&(e.preventDefault(),this._onDrag=!0,this._mouseX=e.pageX,this._mouseY=e.pageY)},_drag:function(e){if(this._onDrag){var t=e.pageX-this._mouseX,n=e.pageY-this._mouseY,a=this.element.offset(),i=a.left+t,o=a.top+n;this.element.offset({left:i,top:o}),this._mouseX=e.pageX,this._mouseY=e.pageY}},_dragEnd:function(){this._onDrag=!1},setup:function(){d.superclass.setup.call(this),this.$("[data-role=head]").css("cursor","move");var e=this;i(document).on("mousemove"+c+this.cid,function(){e._drag.apply(e,arguments)})},destroy:function(){return i(document).off("mousemove"+c+this.cid),d.superclass.destroy.call(this)}});d.alert=function(e,t,n){var a={closeTpl:"",model:{title:!1,icon:"info",message:e,cancelTpl:!1},onConfirm:function(){t&&t(),this.hide()}};new d(i.extend(!0,a,n)).show().after("hide",function(){this.destroy()})},d.confirm=function(e,t,n){var a={closeTpl:"",model:{title:!1,icon:"question",message:e},onConfirm:function(){t&&t(),this.hide()}};new d(i.extend(!0,a,n)).show().after("hide",function(){this.destroy()})},d.show=function(e,t,n){var a={model:{title:!1,message:e,confirmTpl:!1,cancelTpl:!1},onConfirm:function(){t&&t(),this.hide()}};new d(i.extend(!0,a,n)).show().before("hide",function(){t&&t()}).after("hide",function(){this.destroy()})},d.form=function(e,t,n,l){a(t)||(l=n,n=t,t=!1);var s={content:i(e).html(),model:{title:t,confirmTpl:"保存"},afterShow:function(){o.autoRenderAll()},onConfirm:function(){var e=this,t=this.$("[data-widget=validator]");t?o.query(t).execute(function(t){t||(n&&n(),e.hide())}):(n&&n(),e.hide())}};new d(i.extend(!0,s,l)).show().after("hide",function(){this.destroy()})},n.exports=d}),define("kjui/dialog/1.1.0/dialog.tpl",[],'<div class="dialog">\n  <i class="icon-tool-close" title="关闭" data-role="close"></i>\n\n  {{#if title}}\n  <div class="dialog-hd" data-role="head">\n    <span data-role="title">{{{title}}}</span>\n  </div>\n  {{/if}}\n\n  <div data-role="content">\n    <div class="dialog-bd">\n        {{#if icon}}\n        <i class="icon-{{icon}}"></i>\n        {{/if}}\n\n        <span data-role="message">{{{message}}}</span>\n    </div>\n  </div>\n\n  {{#if hasFoot}}\n  <div class="dialog-ft">\n\n    {{#if confirmTpl}}\n      <button class="btn" data-role="confirm">{{{confirmTpl}}}</button>\n    {{/if}}\n\n    {{#if cancelTpl}}\n      <button class="btn" data-role="cancel">{{{cancelTpl}}}</button>\n    {{/if}}\n\n  </div>\n  {{/if}}\n\n</div>\n');
