define("kjui/dialog/1.0.0/dialog",["$","arale/overlay/1.0.1/mask","arale/overlay/1.0.1/overlay","arale/position/1.0.0/position","arale/iframe-shim/1.0.1/iframe-shim","arale/widget/1.0.3/widget","arale/base/1.0.1/base","arale/class/1.0.0/class","arale/events/1.0.0/events","arale/dialog/1.0.2/dialog","arale/widget/1.0.3/templatable","gallery/handlebars/1.0.0/handlebars","./dialog.tpl"],function(e,t,n){var a=e("$"),o=e("arale/overlay/1.0.1/mask"),i=e("arale/dialog/1.0.2/dialog"),l=i.extend({parseElement:function(){i.superclass.parseElement.call(this),this.contentElement=this.$("[data-role=content]"),this.$("[data-role=close]").hide()},events:{"click [data-role=confirm]":function(e){e.preventDefault(),this.trigger("confirm")},"click [data-role=cancel]":function(e){e.preventDefault(),this.hide()}},_onChangeMessage:function(e){this.$("[data-role=message]").html(e)},_onChangeTitle:function(e){this.$("[data-role=title]").html(e)},_onChangeConfirmTpl:function(e){this.$("[data-role=confirm]").html(e)},_onChangeCancelTpl:function(e){this.$("[data-role=cancel]").html(e)}}),s=".dialog-events-";o.set("opacity",.5).set("backgroundColor","rgb(204, 204, 204)");var r=l.extend({attrs:{template:e("./dialog.tpl"),content:"",closeTpl:!0,width:300,zIndex:100},model:{title:"标题",icon:!1,message:"内容",confirmTpl:"确定",cancelTpl:"取消"},parseElement:function(){this.model.hasFoot=this.model.confirmTpl||this.model.cancelTpl,r.superclass.parseElement.call(this)},events:{"mousedown [data-role=head]":"_dragStart","mouseup [data-role=head]":"_dragEnd"},_dragStart:function(e){1==e.which&&(console.log("start"),e.preventDefault(),this._onDrag=!0,this._mouseX=e.pageX,this._mouseY=e.pageY)},_drag:function(e){if(this._onDrag){var t=e.pageX-this._mouseX,n=e.pageY-this._mouseY,a=this.element.offset(),o=a.left+t,i=a.top+n;this.element.offset({left:o,top:i}),this._mouseX=e.pageX,this._mouseY=e.pageY}},_dragEnd:function(){this._onDrag=!1},setup:function(){r.superclass.setup.call(this),this.$("[data-role=head]").css("cursor","move");var e=this;a(document).on("mousemove"+s+this.cid,function(){e._drag.apply(e,arguments)})},destroy:function(){return a(document).off("mousemove"+s+this.cid),r.superclass.destroy.call(this)}});r.alert=function(e,t,n){var o={closeTpl:"",model:{title:!1,icon:"info",message:e,cancelTpl:!1},onConfirm:function(){t&&t(),this.hide()}};new r(a.extend(!0,o,n)).show().after("hide",function(){this.destroy()})},r.confirm=function(e,t,n,o){var i={closeTpl:"",model:{title:t,icon:"question",message:e},onConfirm:function(){n&&n(),this.hide()}};new r(a.extend(!0,i,o)).show().after("hide",function(){this.destroy()})},r.show=function(e,t,n){var o={model:{title:!1,message:e,confirmTpl:!1,cancelTpl:!1},onConfirm:function(){t&&t(),this.hide()}};new r(a.extend(!0,o,n)).show().before("hide",function(){t&&t()}).after("hide",function(){this.destroy()})},n.exports=r}),define("kjui/dialog/1.0.0/dialog.tpl",[],'<div class="dialog">\n  <i class="icon-tool-close" title="关闭" data-role="close"></i>\n\n  {{#if title}}\n  <div class="form-hd" data-role="head">\n    <span data-role="title">{{{title}}}</span>\n  </div>\n  {{/if}}\n\n  <div data-role="content" class="form-bd">\n    {{#if icon}}\n    <i class="icon-{{icon}}"></i>\n    {{/if}}\n\n    <span data-role="message">{{{message}}}</span>\n  </div>\n\n  {{#if hasFoot}}\n  <div class="form-ft">\n\n    {{#if confirmTpl}}\n      <button class="btn" data-role="confirm">{{{confirmTpl}}}</button>\n    {{/if}}\n\n    {{#if cancelTpl}}\n      <button class="btn" data-role="cancel">{{{cancelTpl}}}</button>\n    {{/if}}\n\n  </div>\n  {{/if}}\n\n</div>\n');
